% !TEX encoding = UTF-8 Unicode
% !TEX root =  Main.tex

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% GRUNDLEGENDE DOKUMENTEINSTELLUNGEN
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Seitenlayout und Kopfzeilen
\usepackage[
    automark,     % Kapitelangaben in Kopfzeile automatisch erstellen
    headsepline,  % Trennlinie unter Kopfzeile
    ilines        % Trennlinie linksbündig ausrichten
]{scrlayer-scrpage}

% Seitengeometrie und Abstände
\usepackage{geometry}
\usepackage{setspace}

% Fortlaufende Nummerierung
\usepackage{chngcntr}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% SPRACHE UND SCHRIFT
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Spracheinstellungen
\usepackage[ngerman]{babel}

% Schriftart und Kodierung
\usepackage{newtxtext,newtxmath}  % Times New Roman als Hauptschrift
\renewcommand{\familydefault}{\rmdefault}
\addtokomafont{disposition}{\rmfamily}
\addtokomafont{chapter}{\fontsize{13pt}{13pt}\selectfont}
\addtokomafont{section}{\fontsize{13pt}{13pt}\selectfont}
\addtokomafont{subsection}{\fontsize{13pt}{13pt}\selectfont}

% Schriftgrößen und Textauszeichnung
\usepackage{relsize}      % Relative Schriftgrößen
\usepackage[normalem]{ulem}  % Bessere Unterstreichungen
\usepackage{textcomp}     % Zusätzliche Symbole
\usepackage{microtype}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% ABBILDUNGEN UND GRAFIKEN
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Grundlegende Grafikunterstützung
\usepackage{graphicx}
\graphicspath{{Bilder/}}

% Erweiterte Grafikfunktionen
\usepackage{svg}
\usepackage{tikz}
\usepackage[vflt]{floatflt}  % Textumfluss
\usepackage{subfigure}       % Teilabbildungen
\usepackage{rotating}        % Rotation von Elementen

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% HYPERLINKS UND PDF-EINSTELLUNGEN
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% URL-Formatierung
\usepackage{url}

% PDF-Optionen und Hyperlinks
\usepackage[
    bookmarks,
    bookmarksopen=true,
    colorlinks=true,
    linkcolor=black,     % Interne Links (wie im Inhaltsverzeichnis) in Schwarz
    anchorcolor=black,
    citecolor=blue,
    filecolor=magenta,
    menucolor=black,
    urlcolor=cyan,
    plainpages=false,
    pdfpagelabels,
    hypertexnames=false,
    linktocpage,
    pdftitle={\titel\untertitel},
    pdfauthor={\autor},
    pdfcreator={\creator},
    pdfsubject={\titel\untertitel},
    pdfkeywords={\keywords}
]{hyperref}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% VERZEICHNISSE UND REFERENZEN
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Glossar und Abkürzungen
\usepackage[acronym,nomain,nopostdot,nonumberlist]{glossaries}
\makeglossaries%
\setglossarystyle{list}
\renewcommand*{\glsnamefont}[1]{\textrm{#1}}

% Literaturverzeichnis
% \usepackage[square,numbers,sort&compress]{natbib}
\usepackage{csquotes} % wurde im Log empfohlen
\usepackage[
    backend=biber,
    style=authoryear,
    language=ngerman,
    backref=true
]{biblatex}
\addbibresource{Literatur/Bibliographie.bib}


% To set square brackets for parencite, use:
\renewcommand*{\mkbibparens}[1]{\mkbibbrackets{#1}}
\DeclareRobustCommand{\addcomma}{,}
\DeclareLabelalphaTemplate{
  \labelelement{
    \field[strwidth=3,strside=left]{labelname}
  }
  \labelelement{
    \field[strwidth=2,strside=right]{year}
  }
}
\DeclareFieldFormat{labelyear}{%
  \iffieldundef{year}
    {o.\,J.} % ohne Jahr
    {#1}
}
\DeclareFieldFormat{labelname}{%
  \iffieldundef{name}
    {o.\,A.} % ohne Autor
    {#1}
}
\addbibresource{Literatur/Bibliographie.bib}
% Index
\usepackage{makeidx}
\usepackage{etoolbox}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% MATHEMATIK UND SYMBOLE
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{amsmath,amsfonts}  % Mathematische Symbole
\usepackage{eurosym}           % Währungssymbole

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% TABELLEN UND AUFLISTUNGEN
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Tabellenformatierung
\usepackage{tabularx}
\usepackage{multirow}
\usepackage{array}
\usepackage{longtable}
\usepackage{ltxtable}

% Listen und Aufzählungen
\usepackage{paralist}
\usepackage{enumitem}
\setlist[description]{font=\rmfamily}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% PROGRAMMCODE UND LISTINGS
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{listings}
\usepackage{xcolor}

% Grundlegende Farben für Listings
\definecolor{hellgelb}{rgb}{1,1,0.9}
\definecolor{colKeys}{rgb}{0.8,0,0.5}
\definecolor{colIdentifier}{rgb}{0.6,0,0.3}
\definecolor{colComments}{rgb}{0,0.5,0}
\definecolor{colString}{rgb}{0,0,1}

% Listing-Standardeinstellungen
\lstset{
    float=htbp,
    basicstyle=\ttfamily\color{black}\small\smaller,
    identifierstyle=,%\color{colIdentifier},
    keywordstyle=\color{colKeys}\bfseries,
    stringstyle=\color{colString},
    commentstyle=\color{colComments},
    columns=flexible,
    tabsize=4,
    frame=single,
    extendedchars=true,
    showspaces=false,
    showstringspaces=false,
    numbers=left,
    numberstyle=\tiny,
    breaklines=true,
    backgroundcolor=\color{hellgelb},
    breakautoindent=true,
    escapeinside={(*}{*)},
    literate={Ö}{{\"O}}1 {Ä}{{\"A}}1 {Ü}{{\"U}}1 {ß}{{\ss}}2 {ü}{{\"u}}1 {ä}{{\"a}}1 {ö}{{\"o}}1 {µ}{\textmu}1
}

% Sprachdefinitionen für Listings
% CSS
\lstdefinelanguage{CSS}{
    morestring=[b]',
    morestring=[b]",
    comment=[l]{/*}{*/},
    sensitive=false,
    morekeywords={accelerator,adjust,after,align,attachment,azimuth,background,before,behavior,binding,border,bottom,bottomright,bottomleft,break,caption-side,char,clear,clip,color,colors,cue,cursor,collapse,decoration,direction,display,elevation,empty-cells,family,filter,float,flow,focus,font,grid,height,image,increment,indent,input,inside,ime-mode,include-source,justify,last,layer,left,letter,line,list,margin,marker,marks,max,min,mode,modify,moz,offsett,opacity,orphans,outline,overflow,overflow-X,overflow-Y,overhang,position,position-x,position-y,padding,page,pause,pitch,play-during,position,quotes,radius,range,repeat,replace,reset,richness,right,ruby,set-link-source,select,shadow,size,spacing,speak,speak-header,speak-numeral,speak-punctuation,speech-rate,stress,stretch,style,table-layout,text,transform,text-autospace,text-kashida-space,top,topleft,topright,type,underline,unicode-bidi,use-link-source,user,variant,vertical,visibility,voice-family,volume,white-space,weight,widows,width,word,wrap,word-wrap,writing-mode,z-index,zoom}
}

% JavaScript
\lstdefinelanguage{JavaScript}{
    keywords={typeof, new, true, false, catch, function, return, null, catch, switch, var, if, in, while, do, else, case, break},
    keywordstyle=\color{colKeys}\bfseries,
    ndkeywords={class, export, boolean, throw, implements, import, this},
    ndkeywordstyle=\color{darkgray}\bfseries,
    sensitive=false,
    comment=[l]{//},
    morecomment=[s]{/*}{*/},
    morestring=[b]',
    morestring=[b]"
}

% TypoScript
\lstdefinelanguage{TypoScript}{
    keywords=[1]{PAGE, HTML, TEXT, COA, COA\_INT, FILE, IMAGE, IMG\_RESOURCE, CLEARGIF, CONTENT, RECORDS, HMENU, CTABLE, OTABLE, COLUMNS, HRULER, IMGTEXT, CASE, LOAD\_REGISTER, RESTORE\_REGISTER, FORM, SEARCHRESULT, USER, USER\_INT, TEMPLATE, FLUIDTEMPLATE, MULTIMEDIA, SVG, EDITPANEL, GIFBUILDER, GMENU, TMENU, TMENUITEM, IMGMENU, IMGMENUITEM, JSMENU, JSMENUITEM, BOX},
    keywordstyle=[1]{\color{blue}\bfseries},
    keywords=[2]{plugin, view, page, file, text, config},
    keywordstyle=[2]{\color{blue}\bfseries},
    keywords=[3]{EXT},
    keywordstyle=[3]{\color{blue}\bfseries},
    sensitive=true,
    comment=[l]{\#\ }
}

% PHP5
\lstdefinelanguage[5]{PHP}[]{PHP} {
    morekeywords={
        class,static,private,public,abstract,interface,const,function,require_once,final,new,extends,implements,
        array_combine,array_diff_uassoc,array_udiff,array_udiff_assoc,
        array_udiff_uassoc,array_walk_recursive,array_uintersect_assoc,
        array_usintersect_uassoc,array_uintersect,
        str_split, strpbrk,substr_compare,
        idate,date_sunset,date_sunrise,time_nanosleep,
        return
    }
}

% Fluid
\lstdefinelanguage[Fluid]{HTML}[]{HTML} {
    morekeywords={if, for, each, as, condition, controller, arguments, image, link, action, class}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% ZUSÄTZLICHE FUNKTIONALITÄT
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% PDF-Einbindung
\usepackage[final]{pdfpages}

% Textformatierung
\usepackage{ragged2e}
\usepackage{lscape}

% Hilfspakete
\usepackage{ifthen}
\usepackage{forloop}
\usepackage{todonotes}
\usepackage{xspace}
\usepackage{datatool}